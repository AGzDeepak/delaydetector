{% extends 'base.html' %}
{% block title %}Preferences · Awareness Delay{% endblock %}
{% block content %}
<div class="submit-container">
  <div class="submit-card glass-surface">
    <div class="submit-header">
      <h2>⚙️ Opportunity Preferences</h2>
      <p class="subtitle">Set your regions, types, and keywords for smarter recommendations and alerts.</p>
    </div>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert alert-success" id="prefToast">
          {% for m in messages %}
            <p>{{ m }}</p>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    <form method="POST" class="submit-form">
      <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
      <div class="form-section">
        <h3 class="section-title">Preferences</h3>
        <div class="form-group">
          <label>Regions (comma separated)</label>
          <input type="text" name="regions" placeholder="USA, India, Europe" value="{{ pref.regions if pref }}">
        </div>
        <div class="form-group">
          <label>Types (comma separated)</label>
          <input type="text" name="types" placeholder="Internship, Scholarship, Fellowship" value="{{ pref.types if pref }}">
        </div>
        <div class="form-group">
          <label>Keywords (comma separated)</label>
          <input type="text" name="keywords" placeholder="AI, Cloud, Data, Finance" value="{{ pref.keywords if pref }}">
        </div>
        <div class="form-group">
          <label>Alert Channels (comma separated)</label>
          <input type="text" name="channels" placeholder="email, whatsapp, telegram" value="{{ pref.alert_channels if pref }}">
        </div>
      </div>
      <button type="submit" class="submit-btn"><span class="btn-text">Save Preferences</span></button>
    </form>
  </div>
</div>
<script>
  const toast = document.getElementById('prefToast');
  if (toast) {
    setTimeout(() => { toast.style.display = 'none'; }, 2500);
  }
</script>
{% endblock %}
